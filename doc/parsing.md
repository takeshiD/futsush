# 字句解析、構文解析
前章までで単一コマンドの実行が引数も付きで出来ました。
ただしスペースを上手く入れなければならないなど少し面倒です。

ここまでは単一コマンドだけを考えていたので面倒程度で済みましたが、シェルは複数のコマンドの結果を繋げるパイプライン `|` がありますし、複数行の入力などで行頭を合わせるためにタブ文字を入れる、中括弧`{}`で括る、などもあります。追加機能が欲しいときもあるでしょう。

出来なくは無いですが、前章のようなやり方で進めていると後々修正が大変になってしまいます。

このような問題に対して字句解析と構文解析という手法がよく使われます。
かなり深い話題なので本書では最低限しか触れません。

技術として一度知っておくと今後あらゆる場面で役に立つことは請け合いですので、気になる方は以下の記事がとてもわかり易く丁寧なのでオススメです。

[低レイヤを知りたい人のためのCコンパイラ作成入門](https://www.sigbus.info/compilerbook)

# 字句解析
字句解析とは文字列を単語単位に分割して列にすることです。単語をトークン、文字列をトークン列に変換することをトークナイズと言います。

字句解析を行うためにはここでいう単語、すなわちトークンを定義しなければなりません。前章までの内容においてトークンは

* 識別子(ID): 1文字以上の印字可能文字

です。半角スペースはトークンの区切りとして扱います。

![](/doc/img/parsing_3.svg)

トークン列は通常、連結リストで構成します。
